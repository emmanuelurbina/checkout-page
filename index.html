<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Checkout</title>
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link rel="stylesheet" href="./public/css/styles.css" class="css">

</head>

<body>
    <header class="header">
        <div class="title-header">
            <h1>Checkout</h1>
        </div>
        <div>&nbsp;</div>
    </header>
    <!-- checkout content -->
    <main class="container">
        <section class="info-user">
            <form class="form" id="form" action="">
                <h3 class="form-title">Contact Information</h3>
                <br>
                <div class="contact">
                    <label for="mail">E-mail</label>

                    <div class="group">
                        <input class="control" type="email" name="mail" id="mail" placeholder="Enter your email..." required autofocus>
                        <i class="material-icons">mail</i>
                    </div>
                </div>
                <div class="contact">
                    <label for="phone">Phone</label>

                    <div class="group">
                        <input class="control" type="text" name="phone" id="phone" placeholder="Enter your phone..." required>
                        <i class="material-icons">phone</i>
                    </div>
                </div>
                <!-- shipping -->
                <br><br>
                <h3 class="form-title">Shipping addres</h3>
                <br>
                <div class="contact">
                    <label for="fullname">Full name</label>

                    <div class="group">
                        <input class="control" type="text" name="fullname" id="fullname" placeholder="Enter your full name..." value="Rodney Cotton" required>
                        <i class="material-icons">account_circle</i>
                    </div>
                </div>
                <div class="contact">
                    <label for="address">Address</label>

                    <div class="group">
                        <input class="control" type="text" name="address" id="address" placeholder="Enter your address..." required>
                        <i class="material-icons">home</i>
                    </div>
                </div>
                <div class="contact">
                    <label for="city">City</label>

                    <div class="group">
                        <input class="control" type="text" name="city" id="city" placeholder="Enter your city..." required>
                        <i class="material-icons">business</i>
                    </div>
                </div>
                <!-- fixed 2 inputs -->
                <div class="row-2">
                    <div class="row-1">
                        <div class="contact">
                            <label for="country">Country</label>

                            <div class="group">
                                <select name="country" id="country" class="control">
                                    <option value="0">Select country</option>
                                </select>
                                <i class="material-icons">language</i>
                            </div>
                        </div>
                    </div>
                    <div class="row-1">
                        <div class="contact">
                            <label for="cp">Postal code</label>

                            <div class="group">
                                <input class="control" type="text" name="cp" id="cp" placeholder="Enter your postal code..." required>
                                <i class="material-icons">markunread_mailbox</i>
                            </div>
                        </div>
                    </div>

                </div>
                <div class="contact">
                    <div class="group">
                        <label class="container_">
                            Remember me
                            <input type="checkbox">
                            <span class="checkmark"></span>
                        </label>
                    </div>

                </div>

                <p class="buttons">
                    <button id="continue" type="submit">Continue</button>
                </p>



            </form>
        </section>
        <section class="info-product">
            <article class="card" id="app">
                <div class="product">
                    <div class="product-img">
                        <img class="imagen" src="./public/images/photo1.png" alt="1">
                    </div>
                    <div class="description">
                        <div class="info">
                            <strong>Vintage bagpack</strong>
                            <ul class="prices">
                                <li class="forsale">$54.99</li>
                                <li class="real">$94.99</li>
                            </ul>
                            <ul class="controls">
                                <li class="min" onclick="sub_item('prod1')">-</li>
                                <li class="qty"><input id="qty" type="text" data-prod="prod1" class="qty" min="0" max="5" value="1">
                                </li>
                                <li class="add" onclick="add_item('prod1')">+</li>
                            </ul>
                        </div>

                    </div>

                </div>
                <div class="product">
                    <div class="product-img">
                        <img class="imagen" src="./public/images/photo2.png" alt="2">
                    </div>
                    <div class="description">
                        <div class="info">
                            <strong>Levi Shoes</strong>
                            <ul class="prices">
                                <li class="forsale">$74.99</li>
                                <li class="real">$124.99</li>
                            </ul>
                            <ul class="controls">
                                <li class="min" onclick="sub_item('prod2')">-</li>
                                <li class="qty"><input type="text" id="qty" data-prod="prod2" class="qty" min="0" max="5" value="1"></li>
                                <li class="add" onclick="add_item('prod2')">+</li>
                            </ul>
                        </div>
                    </div>

                </div>
                <div class=" card-footer ">
                    <div class=" shipping-price ">

                    </div>
                    <div class=" total-shop ">

                    </div>
                </div>
                <div class="shipping-info">
                    <div>
                        Shipping
                    </div>
                    <div class="price">
                        $ 19
                    </div>
                </div>
                <div class="total-shopping">
                    <div>
                        Total
                    </div>
                    <div class="price">
                        $ 148.98
                    </div>
                </div>
            </article>
        </section>
    </main>
    <footer class="footer">
        <a href="https://github.com/emmanuelurbina">Emmanuel Lucio Urbina</a> @
        <a href="https://devchallenges.io/">devchallenges.io</a>
    </footer>
    <script>
        function add_item(item = " ") {
            let qty = document.querySelectorAll("#qty")
            qty.forEach(ele => {
                if (ele.getAttribute("data-prod") == item) {
                    ele.value++
                }
            })
        }

        function sub_item(item = " ") {
            let qty = document.querySelectorAll("#qty")
            qty.forEach(ele => {
                if (ele.getAttribute("data-prod") == item) {
                    (ele.value == 0) ? ele.value = 0: ele.value--
                }
            })
        }


        /*when all dom loaded*/
        /*
            with api restcountries can fill the select with countries
            using async functions for fetch promise.
        */
        async function get_countries() {
            let formulario = document.getElementById("form")

            function previene(event) {
                alert("Proced to pay...")
                event.preventDefault()
            }
            formulario.addEventListener("submit", previene, true)
            const SelectCountries = document.querySelector(" #country ")
            const Countries = await fetch(" https://restcountries.eu/rest/v2/all ")
            const CountriyesJson = await Countries.json()
            var option = Object
            CountriyesJson.forEach(ele => {
                option = document.createElement('option')
                option.value = ele.numericCode
                option.text = ele.name
                SelectCountries.appendChild(option)
            })
        }
        get_countries()
    </script>
</body>

</html>